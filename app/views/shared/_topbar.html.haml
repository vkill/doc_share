/%header.master
%header
  .topbar{"data-dropdown" => "dropdown"}
    .topbar-inner
      .container
        %h3
          = link_to SiteConfig.q(:site_name), root_path
        %ul.nav
          %li
            = link_to t("web.topbar.repositories"), repositories_path
        %ul.nav.secondary-nav
          %form.pull-left{:action => ""}
            %input{:placeholder => "Search", :type => "text"}

          - if logged_in?
            - if admin?
              %li
                = link_to t("web.topbar.admin"), admin_root_path
            %li
              = link_to t("web.topbar.dashboard"), dashboard_path
            %li
              - if current_user.unread_system_notifications_count > 0
                = link_to t("web.topbar.inbox") + "(" + current_user.unread_system_notifications_count.to_s + ")",
                          [:account, :notifications, :messages]
              - elsif current_user.unread_member_mailboxs_count > 0
                = link_to t("web.topbar.inbox") + "(" + current_user.unread_member_mailboxs_count.to_s + ")",
                          [:account, :messages]
              - else
                = link_to t("web.topbar.inbox") + "(" + 0.to_s + ")",
                          [:account, :messages]

            %li.dropdown
              = link_to current_user.username, "javascript:void(0)", :class => "dropdown-toggle"
              %ul.dropdown-menu
                %li
                  = link_to t("web.topbar.profile_center"), profile_path
                %li.divider
                %li
                  = link_to t("web.topbar.user_page"), user_page_path(current_user)

            %li
              = link_to t("web.topbar.sign_out"), signout_path
          - else
            %li
              = link_to t("web.topbar.sign_up"), signup_path
            %li
              = link_to t("web.topbar.forget_password"), new_reset_password_path
            %li
              = link_to t("web.topbar.sign_in"), signin_path

